{
  "resourceType": "Questionnaire",
  "id": "ACDCPlusNQIPClinicalQI",
  "meta": {
    "profile": [
      "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-render",
      "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-pop-exp"
    ]
  },
  "url": "https://smartforms.csiro.au/ig/Questionnaire/ACDCPlusNQIPClinicalQI",
  "title": "ACDC+ NQIP Clinical QI Dataset - v1.3",
  "description": "ACDC+ NQIP Clinical QI Dataset - v1.3",
  "extension": [
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext",
      "extension": [
        {
          "url": "name",
          "valueCoding": {
            "code": "patient",
            "system": "http://hl7.org/fhir/uv/sdc/CodeSystem/launchContext"
          }
        },
        {
          "url": "type",
          "valueCode": "Patient"
        },
        {
          "url": "description",
          "valueString": "The resident whose record will be used to pre-populate the form"
        }
      ]
    },
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext",
      "extension": [
        {
          "url": "name",
          "valueCoding": {
            "code": "user",
            "system": "http://hl7.org/fhir/uv/sdc/CodeSystem/launchContext"
          }
        },
        {
          "url": "type",
          "valueCode": "Practitioner"
        },
        {
          "url": "description",
          "valueString": "The practitioner user that is to be used to pre-populate the form"
        }
      ]
    },
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext",
      "extension": [
        {
          "url": "name",
          "valueCoding": {
            "code": "encounter",
            "system": "http://hl7.org/fhir/uv/sdc/CodeSystem/launchContext"
          }
        },
        {
          "url": "type",
          "valueCode": "Encounter"
        },
        {
          "url": "description",
          "valueString": "The encounter that is to be used to pre-populate the form"
        }
      ]
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "Hospitalisation",
        "language": "application/x-fhir-query",
        "expression": "Encounter?class=IMP,EMER,SS&patient={{%patient.id}}"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "Weight",
        "language": "application/x-fhir-query",
        "expression": "Observation?code=27113001&_sort=-date&patient={{%patient.id}}"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "UrinaryContinence",
        "language": "application/x-fhir-query",
        "expression": "Observation?code=129009001&_count=1&_sort=-date&patient={{%patient.id}}"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "BowelContinence",
        "language": "application/x-fhir-query",
        "expression": "Observation?code=129008009&_count=1&_sort=-date&patient={{%patient.id}}"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "BarthelIndex",
        "language": "application/x-fhir-query",
        "expression": "Observation?code=443653008&_count=1&_sort=-date&patient={{%patient.id}}"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "ProblemListItem",
        "language": "application/x-fhir-query",
        "expression": "Condition?category=problem-list-item&patient={{%patient.id}}"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "PressureInjury",
        "language": "application/x-fhir-query",
        "expression": "Condition?category=416462003&code=1163215007&patient={{%patient.id}}"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "IAD",
        "language": "application/x-fhir-query",
        "expression": "Condition?category=416462003&code=402275006&patient={{%patient.id}}"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "RestrictivePractice",
        "language": "application/x-fhir-query",
        "expression": "Procedure?code=386423001,90278001,386517008,68894007&patient={{%patient.id}}"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "birthDate",
        "language": "application/x-fhir-query",
        "expression": "Patient?_elements=birthDate&_count=1&_sort=-date&patient={{%patient.id}}"
      }
    }
  ],
  "name": "ACDCPlusNQIPClinicalQIe",
  "status": "draft",
  "experimental": true,
  "subjectType": ["Patient"],
  "date": "2024-04-09",
  "jurisdiction": [
    {
      "coding": [
        {
          "code": "AU",
          "system": "urn:iso:std:iso:3166"
        }
      ]
    }
  ],
  "item": [
    {
      "type": "display",
      "linkId": "InstructionforCorrections",
      "text": "Please note: corrections to any of the items below must be made in the resident's clinical record in AutumnCare and then refreshing this document"
    },
    {
      "extension": [
        {
          "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
          "valueExpression": {
            "language": "text/fhirpath",
            "expression": "%patient.gender"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden",
          "valueBoolean": true
        }
      ],
      "linkId": "ResidentGender",
      "text": "Gender",
      "type": "choice",
      "repeats": false,
      "answerValueSet": "http://hl7.org/fhir/ValueSet/administrative-gender"
    },
    {
      "linkId": "resident-age",
      "text": "Resident age",
      "type": "integer",
      "readOnly": true,
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/cqf-calculatedValue",
          "valueExpression": {
            "language": "text/fhirpath",
            "expression": "today().toString().substring(0,4).toInteger() - %resource.birthDate.toString().substring(0,4).toInteger()"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden",
          "valueBoolean": true
        }
      ]
    },
    {
      "linkId": "NQIPSummaryAbsentEntireQuarter",
      "text": "Resident was absent from the home for the entire quarter?",
      "type": "boolean",
      "repeats": false,
      "required": true,
      "readOnly": false,
      "initial": [
        {
          "valueBoolean": false
        }
      ]
    },
    {
      "linkId": "NQIPSummaryEndOfLifeCare",
      "text": "Resident is receiving end-of-life care",
      "type": "boolean",
      "repeats": false,
      "required": true,
      "readOnly": false,
      "enableWhen": [
        {
          "question": "NQIPSummaryAbsentEntireQuarter",
          "operator": "=",
          "answerBoolean": false
        }
      ],
      "initial": [
        {
          "valueBoolean": false
        }
      ]
    },
    {
      "linkId": "SummaryHospitalisation",
      "text": "Hospitalisation",
      "type": "group",
      "repeats": false,
      "item": [
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "code": "group",
                    "system": "http://hl7.org/fhir/questionnaire-item-control"
                  }
                ]
              }
            },
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemPopulationContext",
              "valueExpression": {
                "name": "HospitalisationRepeat",
                "language": "text/fhirpath",
                "expression": "%Hospitalisation.entry.resource"
              }
            }
          ],
          "linkId": "IndividualHospitalisationDetails",
          "text": "Detailed record of hospital transfers",
          "type": "group",
          "repeats": true,
          "item": [
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%HospitalisationRepeat.class"
                  }
                },
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "code": "drop-down",
                        "system": "http://hl7.org/fhir/questionnaire-item-control"
                      }
                    ]
                  }
                }
              ],
              "linkId": "HospitalTransferType",
              "text": "Transfer",
              "type": "choice",
              "repeats": false,
              "answerOption": [
                {
                  "valueCoding": {
                    "code": "IMP",
                    "system": "http://terminology.hl7.org/CodeSystem/v3-ActCode",
                    "display": "inpatient encounter"
                  }
                },
                {
                  "valueCoding": {
                    "code": "EMER",
                    "system": "http://terminology.hl7.org/CodeSystem/v3-ActCode",
                    "display": "emergency"
                  }
                },
                {
                  "valueCoding": {
                    "code": "SS",
                    "system": "http://terminology.hl7.org/CodeSystem/v3-ActCode",
                    "display": "short stay"
                  }
                }
              ]
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%HospitalisationRepeat.status"
                  }
                },
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "code": "drop-down",
                        "system": "http://hl7.org/fhir/questionnaire-item-control"
                      }
                    ]
                  }
                }
              ],
              "linkId": "HospitalTransferStatus",
              "text": "Status",
              "type": "choice",
              "repeats": false,
              "answerOption": [
                {
                  "valueCoding": {
                    "code": "in-progress",
                    "system": "http://hl7.org/fhir/encounter-status",
                    "display": "In Progress"
                  }
                },
                {
                  "valueCoding": {
                    "code": "finished",
                    "system": "http://hl7.org/fhir/encounter-status",
                    "display": "Finished"
                  }
                }
              ]
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%HospitalisationRepeat.period.start"
                  }
                }
              ],
              "linkId": "HospitalTransferDateandTime",
              "text": "Hospital transfer date",
              "type": "date",
              "repeats": false
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%HospitalisationRepeat.period.end"
                  }
                }
              ],
              "linkId": "HospitalTransferEndDateandTime",
              "text": "Hospital transfer complete",
              "type": "date",
              "repeats": false
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%HospitalisationRepeat.where(class.exists(code='IMP')).length.value.round(0)"
                  }
                },
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-unit",
                  "valueCoding": {
                    "code": "d",
                    "system": "http://unitsofmeasure.org"
                  }
                }
              ],
              "linkId": "HospitalisationDuration",
              "text": "Duration",
              "type": "integer",
              "repeats": false,
              "item": [
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                      "valueCodeableConcept": {
                        "coding": [
                          {
                            "code": "unit",
                            "system": "http://hl7.org/fhir/questionnaire-item-control"
                          }
                        ]
                      }
                    }
                  ],
                  "linkId": "HospitalisationEncounterDurationUnit",
                  "text": "days",
                  "type": "display"
                }
              ]
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%HospitalisationRepeat.reasonCode.text"
                  }
                }
              ],
              "linkId": "HospitalTransferReason",
              "text": "Main reason for transfer",
              "type": "string",
              "repeats": false
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%HospitalisationRepeat.serviceProvider.display"
                  }
                }
              ],
              "linkId": "HospitalTransferServiceProviderName",
              "text": "Service transferred to",
              "type": "string",
              "repeats": false
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%HospitalisationRepeat.serviceProvider.identifier.value"
                  }
                },
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden",
                  "valueBoolean": true
                }
              ],
              "linkId": "HospitalTransferServiceProviderIdentifier",
              "text": "Identifier of service transferred to",
              "type": "string",
              "repeats": false
            }
          ]
        },
        {
          "linkId": "SummaryHospitalisationAssessed",
          "text": "Resident was assessed for Hospitalisation?",
          "type": "boolean",
          "repeats": false,
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
              "valueExpression": {
                "language": "text/fhirpath",
                "expression": "count(../IndividualHospitalisationDetails) > 0"
              }
            }
          ],
          "required": true,
          "readOnly": false,
          "enableWhen": [
            {
              "question": "NQIPSummaryAbsentEntireQuarter",
              "operator": "=",
              "answerBoolean": false
            }
          ]
        },
        {
          "linkId": "SummaryHospitalisationAssessmentDate",
          "text": "Date of Hospitalisation assessment",
          "type": "date",
          "repeats": false,
          "required": true,
          "enableWhen": [
            {
              "question": "SummaryHospitalisationAssessed",
              "operator": "=",
              "answerBoolean": true
            }
          ]
        }
      ]
    },
    {
      "linkId": "SummaryPressureInjuries",
      "text": "Pressure injuries",
      "type": "group",
      "repeats": false,
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "code": "drop-down",
                "system": "http://hl7.org/fhir/questionnaire-item-control"
              }
            ]
          }
        }
      ],
      "item": [
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "code": "group",
                    "system": "http://hl7.org/fhir/questionnaire-item-control"
                  }
                ]
              }
            },
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemPopulationContext",
              "valueExpression": {
                "name": "PressureInjuryRepeat",
                "language": "text/fhirpath",
                "expression": "%PressureInjury.entry.resource"
              }
            }
          ],
          "linkId": "DetailedRecordPressureInjuries",
          "text": "Detailed record of active pressure injuries",
          "type": "group",
          "repeats": true,
          "item": [
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "code": "drop-down",
                        "system": "http://hl7.org/fhir/questionnaire-item-control"
                      }
                    ]
                  }
                },
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%PressureInjuryRepeat.stage.summary.coding"
                  }
                }
              ],
              "linkId": "IndividualPressureInjuryStage",
              "text": "Stage",
              "type": "choice",
              "repeats": false,
              "answerOption": [
                {
                  "valueCoding": {
                    "code": "1163217004",
                    "system": "http://snomed.info/sct",
                    "display": "Pressure injury stage I"
                  }
                },
                {
                  "valueCoding": {
                    "code": "1163220007",
                    "system": "http://snomed.info/sct",
                    "display": "Pressure injury stage II"
                  }
                },
                {
                  "valueCoding": {
                    "code": "1163222004",
                    "system": "http://snomed.info/sct",
                    "display": "Pressure injury stage III"
                  }
                },
                {
                  "valueCoding": {
                    "code": "1163224003",
                    "system": "http://snomed.info/sct",
                    "display": "Pressure injury stage IV"
                  }
                },
                {
                  "valueCoding": {
                    "code": "723073000",
                    "system": "http://snomed.info/sct",
                    "display": "Suspected deep tissue pressure injury"
                  }
                },
                {
                  "valueCoding": {
                    "code": "1163226001",
                    "system": "http://snomed.info/sct",
                    "display": "Unstageable pressure injury"
                  }
                }
              ]
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%PressureInjuryRepeat.bodySite.text"
                  }
                }
              ],
              "linkId": "IndividualPressureInjuryBodysite",
              "text": "Body site",
              "type": "string",
              "repeats": false
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "code": "drop-down",
                        "system": "http://hl7.org/fhir/questionnaire-item-control"
                      }
                    ]
                  }
                },
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%PressureInjuryRepeat.extension.where(url='https://smartforms.csiro.au/ig/StructureDefinition/ConditionEnvironmentAcquired').value.coding"
                  }
                }
              ],
              "linkId": "pressureinjuries-wound-environmentacquired",
              "text": "Environment where pressure injury was acquired",
              "type": "choice",
              "repeats": false,
              "answerOption": [
                {
                  "valueCoding": {
                    "code": "22232009",
                    "system": "http://snomed.info/sct",
                    "display": "Hospital"
                  }
                },
                {
                  "valueCoding": {
                    "code": "285202004",
                    "system": "http://snomed.info/sct",
                    "display": "Community environment"
                  }
                },
                {
                  "valueCoding": {
                    "code": "257652008",
                    "system": "http://snomed.info/sct",
                    "display": "Aged care facility"
                  }
                }
              ]
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%PressureInjuryRepeat.recordedDate"
                  }
                }
              ],
              "linkId": "IndividualPressureInjuryDateRecorded",
              "text": "Date recorded",
              "type": "date",
              "repeats": false
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%PressureInjuryRepeat.onset.ofType(date)"
                  }
                }
              ],
              "linkId": "IndividualPressureInjuryOnsetdate",
              "text": "Onset date",
              "type": "date",
              "repeats": false
            }
          ]
        },
        {
          "linkId": "PressureInjurySummary",
          "text": "Pressure Injury Summary",
          "type": "group",
          "item": [
            {
              "linkId": "SummaryPressureInjuryStageI",
              "text": "Pressure Injury Stage I",
              "type": "group",
              "repeats": false,
              "item": [
                {
                  "linkId": "SummaryPressureInjuryStageINumber",
                  "text": "Number present",
                  "type": "integer",
                  "repeats": false,
                  "required": true,
                  "readOnly": true,
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "count(%SummaryPressureInjuries.DetailedRecordPressureInjuries[*].IndividualPressureInjuryStage.where(valueCoding.code = '1163217004'))"
                      }
                    }
                  ]
                },
                {
                  "linkId": "SummaryPressureInjuryStageIOutsideNumber",
                  "text": "Number acquired outside of service",
                  "type": "integer",
                  "repeats": false,
                  "required": true,
                  "readOnly": true,
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "count(%SummaryPressureInjuries.DetailedRecordPressureInjuries[*].(IndividualPressureInjuryStage.valueCoding.code = '1163217004' && pressureinjuries-wound-environmentacquired.valueCoding.code in ['22232009', '285202004']))"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "linkId": "SummaryPressureInjuryStage2",
              "text": "Pressure Injury Stage II",
              "type": "group",
              "repeats": false,
              "item": [
                {
                  "linkId": "SummaryPressureInjuryStage2Number",
                  "text": "Number present",
                  "type": "integer",
                  "repeats": false,
                  "required": true,
                  "readOnly": true,
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "count(%SummaryPressureInjuries.DetailedRecordPressureInjuries[*].IndividualPressureInjuryStage.where(valueCoding.code = '1163220007'))"
                      }
                    }
                  ]
                },
                {
                  "linkId": "SummaryPressureInjuryStage2OutsideNumber",
                  "text": "Number acquired outside of service",
                  "type": "integer",
                  "repeats": false,
                  "required": true,
                  "readOnly": true,
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "count(%SummaryPressureInjuries.DetailedRecordPressureInjuries[*].(IndividualPressureInjuryStage.valueCoding.code = '1163220007' && pressureinjuries-wound-environmentacquired.valueCoding.code in ['22232009', '285202004']))"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "linkId": "SummaryPressureInjuryStage3",
              "text": "Pressure Injury Stage III",
              "type": "group",
              "repeats": false,
              "item": [
                {
                  "linkId": "SummaryPressureInjuryStage3Number",
                  "text": "Number present",
                  "type": "integer",
                  "repeats": false,
                  "required": true,
                  "readOnly": true,
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "count(%SummaryPressureInjuries.DetailedRecordPressureInjuries[*].IndividualPressureInjuryStage.where(valueCoding.code = '1163222004'))"
                      }
                    }
                  ]
                },
                {
                  "linkId": "SummaryPressureInjuryStage3OutsideNumber",
                  "text": "Number acquired outside of service",
                  "type": "integer",
                  "repeats": false,
                  "required": true,
                  "readOnly": true,
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "count(%SummaryPressureInjuries.DetailedRecordPressureInjuries[*].(IndividualPressureInjuryStage.valueCoding.code = '1163222004' && pressureinjuries-wound-environmentacquired.valueCoding.code in ['22232009', '285202004']))"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "linkId": "SummaryPressureInjuryStage4",
              "text": "Pressure Injury Stage IV",
              "type": "group",
              "repeats": false,
              "item": [
                {
                  "linkId": "SummaryPressureInjuryStage4Number",
                  "text": "Number present",
                  "type": "integer",
                  "repeats": false,
                  "required": true,
                  "readOnly": true,
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "count(%SummaryPressureInjuries.DetailedRecordPressureInjuries[*].IndividualPressureInjuryStage.where(valueCoding.code = '1163224003'))"
                      }
                    }
                  ]
                },
                {
                  "linkId": "SummaryPressureInjuryStage4OutsideNumber",
                  "text": "Number acquired outside of service",
                  "type": "integer",
                  "repeats": false,
                  "required": true,
                  "readOnly": true,
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "count(%SummaryPressureInjuries.DetailedRecordPressureInjuries[*].(IndividualPressureInjuryStage.valueCoding.code = '1163224003' && pressureinjuries-wound-environmentacquired.valueCoding.code in ['22232009', '285202004']))"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "linkId": "SummaryPressureInjuryUnstageable",
              "text": "Unstageable Pressure Injury",
              "type": "group",
              "repeats": false,
              "item": [
                {
                  "linkId": "SummaryPressureInjuryUnstageableNumber",
                  "text": "Number present",
                  "type": "integer",
                  "repeats": false,
                  "required": true,
                  "readOnly": true,
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "count(%SummaryPressureInjuries.DetailedRecordPressureInjuries[*].IndividualPressureInjuryStage.where(valueCoding.code = '1163226001'))"
                      }
                    }
                  ]
                },
                {
                  "linkId": "SummaryPressureInjuryUnstageableNumberOutside",
                  "text": "Number acquired outside of service",
                  "type": "integer",
                  "repeats": false,
                  "required": true,
                  "readOnly": true,
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "count(%SummaryPressureInjuries.DetailedRecordPressureInjuries[*].(IndividualPressureInjuryStage.valueCoding.code = '1163226001' && pressureinjuries-wound-environmentacquired.valueCoding.code in ['22232009', '285202004']))"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "linkId": "SummaryPressureInjurySDTI",
              "text": "Suspected Deep Tissue Injury",
              "type": "group",
              "repeats": false,
              "item": [
                {
                  "linkId": "SummaryPressureInjurySDTINumber",
                  "text": "Number present",
                  "type": "integer",
                  "repeats": false,
                  "required": true,
                  "readOnly": true,
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "count(%SummaryPressureInjuries.DetailedRecordPressureInjuries[*].IndividualPressureInjuryStage.where(valueCoding.code = '723073000'))"
                      }
                    }
                  ]
                },
                {
                  "linkId": "SummaryPressureInjurySDTINumberOutside",
                  "text": "Number acquired outside of service",
                  "type": "integer",
                  "repeats": false,
                  "required": true,
                  "readOnly": true,
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "count(%SummaryPressureInjuries.DetailedRecordPressureInjuries[*].(IndividualPressureInjuryStage.valueCoding.code = '723073000' && pressureinjuries-wound-environmentacquired.valueCoding.code in ['22232009', '285202004']))"
                      }
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "linkId": "SummaryPressureInjuriesConsent",
          "text": "Resident withheld consent for pressure injury assessment?",
          "type": "boolean",
          "repeats": false,
          "required": true,
          "readOnly": false,
          "enableWhen": [
            {
              "question": "NQIPSummaryAbsentEntireQuarter",
              "operator": "=",
              "answerBoolean": false
            }
          ]
        },
        {
          "linkId": "SummaryPressureInjuriesAssessed",
          "text": "Resident was assessed but did not have any pressure injuries",
          "type": "boolean",
          "repeats": false,
          "required": true,
          "readOnly": false,
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
              "valueExpression": {
                "language": "text/fhirpath",
                "expression": "count(../Detailed record of active pressure injuries) = 0"
              }
            }
          ],
          "enableWhen": [
            {
              "question": "SummaryPressureInjuriesConsent",
              "operator": "=",
              "answerBoolean": false
            }
          ]
        },
        {
          "linkId": "SummaryPressureInjuriesAssessmentdate",
          "text": "Date of pressure injury assessment",
          "type": "date",
          "repeats": false,
          "required": true,
          "readOnly": false,
          "enableWhen": [
            {
              "question": "SummaryPressureInjuriesAssessed",
              "operator": "exists",
              "answerBoolean": true
            }
          ]
        }
      ]
    },
    {
      "linkId": "SummaryIAD",
      "text": "Incontinence-associated dermatitis - IAD",
      "type": "group",
      "repeats": false,
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "code": "drop-down",
                "system": "http://hl7.org/fhir/questionnaire-item-control"
              }
            ]
          }
        }
      ],
      "item": [
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "code": "group",
                    "system": "http://hl7.org/fhir/questionnaire-item-control"
                  }
                ]
              }
            },
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemPopulationContext",
              "valueExpression": {
                "name": "IADRepeat",
                "language": "text/fhirpath",
                "expression": "%IAD.entry.resource"
              }
            }
          ],
          "linkId": "SummaryIADIndividualIADwound",
          "text": "Detailed record of IAD",
          "type": "group",
          "repeats": true,
          "item": [
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "code": "drop-down",
                        "system": "http://hl7.org/fhir/questionnaire-item-control"
                      }
                    ]
                  }
                },
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%IADRepeat.stage.summary.coding"
                  }
                }
              ],
              "linkId": "SummaryIADIndividualIADwoundStage",
              "text": "Stage",
              "type": "choice",
              "repeats": false,
              "answerOption": [
                {
                  "valueCoding": {
                    "code": "264653008",
                    "system": "http://snomed.info/sct",
                    "display": "1A"
                  }
                },
                {
                  "valueCoding": {
                    "code": "264654002",
                    "system": "http://snomed.info/sct",
                    "display": "1B"
                  }
                },
                {
                  "valueCoding": {
                    "code": "264662005",
                    "system": "http://snomed.info/sct",
                    "display": "2a"
                  }
                },
                {
                  "valueCoding": {
                    "code": "264663000",
                    "system": "http://snomed.info/sct",
                    "display": "2b"
                  }
                }
              ]
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%IADRepeat.bodySite.text"
                  }
                }
              ],
              "linkId": "SummaryIADIndividualIADwoundBodysite",
              "text": "Body site",
              "type": "string",
              "repeats": false
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%IADRepeat.recordedDate"
                  }
                }
              ],
              "linkId": "SummaryIADIndividualIADwoundRecordedDate",
              "text": "Recorded date",
              "type": "date",
              "repeats": false
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%IADRepeat.onset.ofType(date)"
                  }
                }
              ],
              "linkId": "SummaryIADIndividualIADwoundOnsetdate",
              "text": "Onset date",
              "type": "date",
              "repeats": false
            }
          ]
        },
        {
          "linkId": "IADSummary",
          "text": "Number of IAD wounds present for each category",
          "type": "group",
          "repeats": "false",
          "item": [
            {
              "linkId": "SummaryIADIndividualIADwoundStage1A",
              "text": "IAD Stage 1A",
              "repeats": false,
              "type": "integer",
              "required": true,
              "readOnly": true,
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "count(%SummaryIAD.SummaryIADIndividualIADwound[*].SummaryIADIndividualIADwoundStage.where(valueCoding.code = '264653008'))"
                  }
                }
              ]
            },
            {
              "linkId": "SummaryIADIndividualIADwoundStage1B",
              "text": "IAD Stage 1B",
              "repeats": false,
              "type": "integer",
              "required": true,
              "readOnly": true,
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "count(%SummaryIAD.SummaryIADIndividualIADwound[*].SummaryIADIndividualIADwoundStage.where(valueCoding.code = '264654002'))"
                  }
                }
              ]
            },
            {
              "linkId": "SummaryIADIndividualIADwoundStage2A",
              "text": "IAD Stage 2A",
              "type": "integer",
              "repeats": false,
              "required": true,
              "readOnly": true,
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "count(%SummaryIAD.SummaryIADIndividualIADwound[*].SummaryIADIndividualIADwoundStage.where(valueCoding.code = '264662005'))"
                  }
                }
              ]
            },
            {
              "linkId": "SummaryIADIndividualIADwoundStage2B",
              "text": "IAD Stage 2B",
              "type": "integer",
              "repeats": false,
              "required": true,
              "readOnly": true,
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "count(%SummaryIAD.SummaryIADIndividualIADwound[*].SummaryIADIndividualIADwoundStage.where(valueCoding.code = '264663000'))"
                  }
                }
              ]
            }
          ]
        },
        {
          "linkId": "SummaryIADAssessed",
          "text": "Resident was assessed for incontinence care?",
          "type": "boolean",
          "repeats": false,
          "required": true,
          "readOnly": false,
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
              "valueExpression": {
                "language": "text/fhirpath",
                "expression": "count(../SummaryIADIndividualIADwound) > 0"
              }
            }
          ],
          "enableWhen": [
            {
              "question": "NQIPSummaryAbsentEntireQuarter",
              "operator": "=",
              "answerBoolean": false
            }
          ]
        },
        {
          "linkId": "SummaryIADCareRecipientIncontinent",
          "text": "Resident was incontinent?",
          "type": "boolean",
          "repeats": false,
          "required": true,
          "readOnly": false,
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
              "valueExpression": {
                "language": "text/fhirpath",
                "expression": "count(../SummaryIADIndividualIADwound) > 0"
              }
            }
          ],
          "enableWhen": [
            {
              "question": "SummaryIADAssessed",
              "operator": "=",
              "answerBoolean": true
            }
          ]
        },
        {
          "linkId": "SummaryIADCareRecipientHadIAD",
          "text": "Resident with incontinence experienced IAD?",
          "type": "boolean",
          "repeats": false,
          "required": true,
          "readOnly": false,
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
              "valueExpression": {
                "language": "text/fhirpath",
                "expression": "count(../SummaryIADIndividualIADwound) > 0"
              }
            }
          ],
          "enableWhen": [
            {
              "question": "SummaryIADCareRecipientIncontinent",
              "operator": "=",
              "answerBoolean": true
            }
          ]
        },
        {
          "linkId": "SummaryIADExclusion",
          "text": "Resident excluded from IAD assessment because resident is continent?",
          "type": "boolean",
          "repeats": false,
          "required": true,
          "readOnly": false,
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
              "valueExpression": {
                "language": "text/fhirpath",
                "expression": "count(../SummaryIADIndividualIADwound) = 0"
              }
            }
          ],
          "enableWhen": [
            {
              "question": "SummaryIADCareRecipientIncontinent",
              "operator": "=",
              "answerBoolean": false
            }
          ]
        },
        {
          "linkId": "SummaryIADAssessmentDate",
          "text": "Date of IAD assessment",
          "type": "date",
          "repeats": false,
          "required": true,
          "readOnly": false,
          "enableWhen": [
            {
              "question": "SummaryIADAssessed",
              "operator": "=",
              "answerBoolean": true
            }
          ]
        }
      ]
    },
    {
      "linkId": "SummaryPhysicalRestrictivePractice",
      "text": "Physical Restrictive Practice",
      "type": "group",
      "repeats": false,
      "item": [
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "code": "group",
                    "system": "http://hl7.org/fhir/questionnaire-item-control"
                  }
                ]
              }
            },
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemPopulationContext",
              "valueExpression": {
                "name": "RestrictivePracticeRepeat",
                "language": "text/fhirpath",
                "expression": "%RestrictivePractice.entry.resource"
              }
            }
          ],
          "linkId": "SummaryPhysicalRestrictivePracticeIndividualIntervention",
          "text": "Detailed record of Physical Restrictive Practice Intervention",
          "type": "group",
          "repeats": true,
          "item": [
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "code": "drop-down",
                        "system": "http://hl7.org/fhir/questionnaire-item-control"
                      }
                    ]
                  }
                },
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%RestrictivePracticeRepeat.code.coding"
                  }
                }
              ],
              "linkId": "SummaryPhysicalRestrictivePracticeIndividualInterventionCode",
              "text": "Type",
              "type": "choice",
              "repeats": true,
              "answerOption": [
                {
                  "valueCoding": {
                    "code": "386423001",
                    "system": "http://snomed.info/sct",
                    "display": "Physical restraint"
                  }
                },
                {
                  "valueCoding": {
                    "code": "90278001",
                    "system": "http://snomed.info/sct",
                    "display": "Secluding patient"
                  }
                },
                {
                  "valueCoding": {
                    "code": "386517008",
                    "system": "http://snomed.info/sct",
                    "display": "Area restriction"
                  }
                },
                {
                  "valueCoding": {
                    "code": "68894007",
                    "system": "http://snomed.info/sct",
                    "display": "Placing restraint"
                  }
                }
              ]
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "code": "drop-down",
                        "system": "http://hl7.org/fhir/questionnaire-item-control"
                      }
                    ]
                  }
                },
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%RestrictivePracticeRepeat.status"
                  }
                }
              ],
              "linkId": "SummaryPhysicalRestrictivePracticeIndividualInterventionStatus",
              "text": "Status",
              "type": "choice",
              "repeats": false,
              "answerOption": [
                {
                  "valueCoding": {
                    "code": "in-progress",
                    "system": "http://hl7.org/fhir/SSatus",
                    "display": "In Progress"
                  }
                },
                {
                  "valueCoding": {
                    "code": "on-hold",
                    "system": "http://hl7.org/fhir/event-status",
                    "display": "On Hold"
                  }
                },
                {
                  "valueCoding": {
                    "code": "completed",
                    "system": "http://hl7.org/fhir/event-status",
                    "display": "Completed"
                  }
                }
              ]
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%RestrictivePracticeRepeat.select(performed.start | performed.ofType(date))"
                  }
                }
              ],
              "linkId": "SummaryPhysicalRestrictivePracticeIndividualInterventionStartDate",
              "text": "Start date",
              "type": "date",
              "repeats": false
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%RestrictivePracticeRepeat.select(performed.end)"
                  }
                }
              ],
              "linkId": "SummaryPhysicalRestrictivePracticeIndividualPerformedendDate",
              "text": "End date",
              "type": "date",
              "repeats": false
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%RestrictivePracticeRepeat.usedCode.text"
                  }
                }
              ],
              "linkId": "SummaryPhysicalRestrictivePracticeIndividualInterventionSubtypeText",
              "text": "Restraint subtype",
              "type": "string",
              "repeats": false
            }
          ]
        },
        {
          "linkId": "PhysicalRestrictivePracticeSummary",
          "text": "Number of incidents of physical restrictive practice",
          "type": "group",
          "item": [
            {
              "linkId": "SummaryPhysicalRestraint",
              "text": "Physical Restraint",
              "type": "integer",
              "repeats": false,
              "required": true,
              "readOnly": true,
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "count(%SummaryPhysicalRestrictivePractice.SummaryPhysicalRestrictivePracticeIndividualIntervention[*].SummaryPhysicalRestrictivePracticeIndividualInterventionCode.where(valueCoding.code = '386423001'))"
                  }
                }
              ]
            },
            {
              "linkId": "SummaryPhysicalRestrainSecureArea",
              "text": "Physical restraint through use of secure area",
              "type": "integer",
              "repeats": false,
              "required": true,
              "readOnly": true,
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "count(%SummaryPhysicalRestrictivePractice.SummaryPhysicalRestrictivePracticeIndividualIntervention[*].SummaryPhysicalRestrictivePracticeIndividualInterventionCode.where(valueCoding.code = '386517008'))"
                  }
                }
              ]
            }
          ]
        },
        {
          "linkId": "SummaryPhysicalRestrictivePracticeAssessed",
          "text": "Resident was assessed for Physical restrictive practice",
          "type": "boolean",
          "repeats": false,
          "required": true,
          "readOnly": false,
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
              "valueExpression": {
                "language": "text/fhirpath",
                "expression": "count(../SummaryPhysicalRestrictivePracticeIndividualIntervention) > 0"
              }
            }
          ],
          "enableWhen": [
            {
              "question": "NQIPSummaryAbsentEntireQuarter",
              "operator": "=",
              "answerBoolean": false
            }
          ]
        },
        {
          "linkId": "SummaryPhysicalRestrictivePracticeAssessmentdate",
          "text": "Date of Physical restrictive practice assessment",
          "type": "date",
          "repeats": false,
          "required": true,
          "readOnly": false,
          "enableWhen": [
            {
              "question": "SummaryPhysicalRestrictivePracticeAssessed",
              "operator": "=",
              "answerBoolean": true
            }
          ]
        }
      ]
    },
    {
      "linkId": "barthel",
      "text": "Barthel Index of Activities of Daily Living ADLs",
      "type": "group",
      "repeats": false,
      "item": [
        {
          "linkId": "barthel-modified-score",
          "text": "Barthel Index of ADLs score",
          "type": "group",
          "repeats": false,
          "item": [
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%BarthelIndex.entry.resource.value.value"
                  }
                }
              ],
              "linkId": "barthel-modified-value",
              "text": "Score",
              "type": "integer",
              "repeats": false
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%BarthelIndex.entry.resource.effective.ofType(date)"
                  }
                }
              ],
              "linkId": "barthel-modified-effectivedate",
              "text": "Effective date",
              "type": "date",
              "repeats": false
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%BarthelIndex.entry.resource.issued"
                  }
                }
              ],
              "linkId": "barthel-modified-issued",
              "text": "Date issued",
              "type": "date",
              "repeats": false
            }
          ]
        },
        {
          "linkId": "barthel-components",
          "text": "Individual components of Barthel Index",
          "type": "group",
          "item": [
            {
              "linkId": "barthel-components-feeding",
              "text": "Feeding",
              "type": "group",
              "repeats": false,
              "item": [
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%BarthelIndex.entry.resource.component[0].code.coding"
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                      "valueCodeableConcept": {
                        "coding": [
                          {
                            "code": "drop-down",
                            "system": "http://hl7.org/fhir/questionnaire-item-control"
                          }
                        ]
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden",
                      "valueBoolean": true
                    }
                  ],
                  "linkId": "barthel-components-feeding-code",
                  "text": "Code",
                  "type": "choice",
                  "repeats": false,
                  "answerOption": [
                    {
                      "valueCoding": {
                        "code": "83184-2",
                        "system": "http://loinc.org",
                        "display": "Feeding or eating - functional ability"
                      },
                      "initialSelected": true
                    }
                  ]
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%BarthelIndex.entry.resource.component[0].value.value"
                      }
                    }
                  ],
                  "linkId": "barthel-components-feeding-value",
                  "text": "Score",
                  "type": "integer",
                  "repeats": false
                }
              ]
            },
            {
              "linkId": "barthel-components-transfer",
              "text": "Transfer",
              "type": "group",
              "repeats": false,
              "item": [
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%BarthelIndex.entry.resource.component[1].code.coding"
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                      "valueCodeableConcept": {
                        "coding": [
                          {
                            "code": "drop-down",
                            "system": "http://hl7.org/fhir/questionnaire-item-control"
                          }
                        ]
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden",
                      "valueBoolean": true
                    }
                  ],
                  "linkId": "barthel-components-transfer-code",
                  "text": "Code",
                  "type": "choice",
                  "repeats": false,
                  "answerOption": [
                    {
                      "valueCoding": {
                        "code": "83185-9",
                        "system": "http://loinc.org",
                        "display": "Transferring - functional ability"
                      },
                      "initialSelected": true
                    }
                  ]
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%BarthelIndex.entry.resource.component[1].value.value"
                      }
                    }
                  ],
                  "linkId": "barthel-components-transfer-value",
                  "text": "Score",
                  "type": "integer",
                  "repeats": false
                }
              ]
            },
            {
              "linkId": "barthel-components-grooming",
              "text": "Grooming",
              "type": "group",
              "repeats": false,
              "item": [
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%BarthelIndex.entry.resource.component[2].code.coding"
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                      "valueCodeableConcept": {
                        "coding": [
                          {
                            "code": "drop-down",
                            "system": "http://hl7.org/fhir/questionnaire-item-control"
                          }
                        ]
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden",
                      "valueBoolean": true
                    }
                  ],
                  "linkId": "barthel-components-grooming-code",
                  "text": "Code",
                  "type": "choice",
                  "repeats": false,
                  "answerOption": [
                    {
                      "valueCoding": {
                        "code": "96767-9",
                        "system": "http://loinc.org",
                        "display": "Grooming - functional ability"
                      },
                      "initialSelected": true
                    }
                  ]
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%BarthelIndex.entry.resource.component[2].value.value"
                      }
                    }
                  ],
                  "linkId": "barthel-components-grooming-value",
                  "text": "Score",
                  "type": "integer",
                  "repeats": false
                }
              ]
            },
            {
              "linkId": "barthel-components-toiletuse",
              "text": "Toilet Use",
              "type": "group",
              "repeats": false,
              "item": [
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%BarthelIndex.entry.resource.component[3].code.coding"
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                      "valueCodeableConcept": {
                        "coding": [
                          {
                            "code": "drop-down",
                            "system": "http://hl7.org/fhir/questionnaire-item-control"
                          }
                        ]
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden",
                      "valueBoolean": true
                    }
                  ],
                  "linkId": "barthel-components-toiletuse-code",
                  "text": "Code",
                  "type": "choice",
                  "repeats": false,
                  "answerOption": [
                    {
                      "valueCoding": {
                        "code": "83183-4",
                        "system": "http://loinc.org",
                        "display": "Toileting - functional ability"
                      },
                      "initialSelected": true
                    }
                  ]
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%BarthelIndex.entry.resource.component[3].value.value"
                      }
                    }
                  ],
                  "linkId": "barthel-components-toiletuse-value",
                  "text": "Score",
                  "type": "integer",
                  "repeats": false
                }
              ]
            },
            {
              "linkId": "barthel-components-bathing",
              "text": "Bathing",
              "type": "group",
              "repeats": false,
              "item": [
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%BarthelIndex.entry.resource.component[4].code.coding"
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                      "valueCodeableConcept": {
                        "coding": [
                          {
                            "code": "drop-down",
                            "system": "http://hl7.org/fhir/questionnaire-item-control"
                          }
                        ]
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden",
                      "valueBoolean": true
                    }
                  ],
                  "linkId": "barthel-components-bathing-code",
                  "text": "Code",
                  "type": "choice",
                  "repeats": false,
                  "answerOption": [
                    {
                      "valueCoding": {
                        "code": "83181-8",
                        "system": "http://loinc.org",
                        "display": "Bathing - functional ability"
                      },
                      "initialSelected": true
                    }
                  ]
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%BarthelIndex.entry.resource.component[4].value.value"
                      }
                    }
                  ],
                  "linkId": "barthel-components-bathing-value",
                  "text": "Score",
                  "type": "integer",
                  "repeats": false
                }
              ]
            },
            {
              "linkId": "barthel-components-mobility",
              "text": "Mobility",
              "type": "group",
              "repeats": false,
              "item": [
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%BarthelIndex.entry.resource.component[5].code.coding"
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                      "valueCodeableConcept": {
                        "coding": [
                          {
                            "code": "drop-down",
                            "system": "http://hl7.org/fhir/questionnaire-item-control"
                          }
                        ]
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden",
                      "valueBoolean": true
                    }
                  ],
                  "linkId": "barthel-components-mobility-code",
                  "text": "Code",
                  "type": "choice",
                  "repeats": false,
                  "answerOption": [
                    {
                      "valueCoding": {
                        "code": "83186-7",
                        "system": "http://loinc.org",
                        "display": "Ambulation - functional ability"
                      },
                      "initialSelected": true
                    }
                  ]
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%BarthelIndex.entry.resource.component[5].value.value"
                      }
                    }
                  ],
                  "linkId": "barthel-components-mobility-value",
                  "text": "Score",
                  "type": "integer",
                  "repeats": false
                }
              ]
            },
            {
              "linkId": "barthel-components-stairs",
              "text": "Stairs",
              "type": "group",
              "repeats": false,
              "item": [
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%BarthelIndex.entry.resource.component[6].code.coding"
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                      "valueCodeableConcept": {
                        "coding": [
                          {
                            "code": "drop-down",
                            "system": "http://hl7.org/fhir/questionnaire-item-control"
                          }
                        ]
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden",
                      "valueBoolean": true
                    }
                  ],
                  "linkId": "barthel-components-stairs-code",
                  "text": "Code",
                  "type": "choice",
                  "repeats": false,
                  "answerOption": [
                    {
                      "valueCoding": {
                        "code": "96758-8",
                        "system": "http://loinc.org",
                        "display": "Stairs - functional ability"
                      },
                      "initialSelected": true
                    }
                  ]
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%BarthelIndex.entry.resource.component[6].value.value"
                      }
                    }
                  ],
                  "linkId": "barthel-components-stairs-value",
                  "text": "Score",
                  "type": "integer",
                  "repeats": false
                }
              ]
            },
            {
              "linkId": "barthel-components-dressing",
              "text": "Dressing",
              "type": "group",
              "repeats": false,
              "item": [
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%BarthelIndex.entry.resource.component[7].code.coding"
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                      "valueCodeableConcept": {
                        "coding": [
                          {
                            "code": "drop-down",
                            "system": "http://hl7.org/fhir/questionnaire-item-control"
                          }
                        ]
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden",
                      "valueBoolean": true
                    }
                  ],
                  "linkId": "barthel-components-dressing-code",
                  "text": "Code",
                  "type": "choice",
                  "repeats": false,
                  "answerOption": [
                    {
                      "valueCoding": {
                        "code": "83182-6",
                        "system": "http://loinc.org",
                        "display": "Dressing - functional ability"
                      },
                      "initialSelected": true
                    }
                  ]
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%BarthelIndex.entry.resource.component[7].value.value"
                      }
                    }
                  ],
                  "linkId": "barthel-components-dressing-value",
                  "text": "Score",
                  "type": "integer",
                  "repeats": false
                }
              ]
            },
            {
              "linkId": "barthel-components-bowels",
              "text": "Bowels",
              "type": "group",
              "repeats": false,
              "item": [
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%BarthelIndex.entry.resource.component[8].code.coding"
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                      "valueCodeableConcept": {
                        "coding": [
                          {
                            "code": "drop-down",
                            "system": "http://hl7.org/fhir/questionnaire-item-control"
                          }
                        ]
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden",
                      "valueBoolean": true
                    }
                  ],
                  "linkId": "barthel-components-bowels-code",
                  "text": "Code",
                  "type": "choice",
                  "repeats": false,
                  "answerOption": [
                    {
                      "valueCoding": {
                        "code": "96759-6",
                        "system": "http://loinc.org",
                        "display": "Bowel control - functional ability"
                      },
                      "initialSelected": true
                    }
                  ]
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%BarthelIndex.entry.resource.component[8].value.value"
                      }
                    }
                  ],
                  "linkId": "barthel-components-bowels-value",
                  "text": "Score",
                  "type": "integer",
                  "repeats": false
                }
              ]
            },
            {
              "linkId": "barthel-components-bladder",
              "text": "Bladder",
              "type": "group",
              "repeats": false,
              "item": [
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%BarthelIndex.entry.resource.component[9].code.coding"
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                      "valueCodeableConcept": {
                        "coding": [
                          {
                            "code": "drop-down",
                            "system": "http://hl7.org/fhir/questionnaire-item-control"
                          }
                        ]
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden",
                      "valueBoolean": true
                    }
                  ],
                  "linkId": "barthel-components-bladder-code",
                  "text": "Code",
                  "type": "choice",
                  "repeats": false,
                  "answerOption": [
                    {
                      "valueCoding": {
                        "code": "96760-4",
                        "system": "http://loinc.org",
                        "display": "Bladder control - functional ability"
                      },
                      "initialSelected": true
                    }
                  ]
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%BarthelIndex.entry.resource.component[9].value.value"
                      }
                    }
                  ],
                  "linkId": "barthel-components-bladder-value",
                  "text": "Score",
                  "type": "integer",
                  "repeats": false
                }
              ]
            }
          ]
        },
        {
          "linkId": "SummaryBarthelIndexOfADLsAssessed",
          "text": "Resident was assessed for ADLs?",
          "type": "boolean",
          "repeats": false,
          "required": true,
          "readOnly": false,
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
              "valueExpression": {
                "language": "text/fhirpath",
                "expression": "count(../barthel-modified-score) > 0"
              }
            }
          ],
          "enableWhen": [
            {
              "question": "NQIPSummaryEndOfLifeCare",
              "operator": "=",
              "answerBoolean": false
            }
          ]
        },
        {
          "linkId": "SummaryBarthelIndexOfADLsAssessmentdate",
          "text": "Date of ADL assessment",
          "type": "date",
          "repeats": false,
          "required": true,
          "readOnly": false,
          "enableWhen": [
            {
              "question": "SummaryBarthelIndexOfADLsAssessed",
              "operator": "=",
              "answerBoolean": true
            }
          ]
        }
      ]
    },
    {
      "linkId": "SummaryBodyWeight",
      "text": "Body weight",
      "type": "group",
      "repeats": false,
      "item": [
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "code": "group",
                    "system": "http://hl7.org/fhir/questionnaire-item-control"
                  }
                ]
              }
            },
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemPopulationContext",
              "valueExpression": {
                "name": "WeightRepeat",
                "language": "text/fhirpath",
                "expression": "%Weight.entry.resource"
              }
            }
          ],
          "linkId": "SummaryBodyWeightObservation",
          "text": "Detailed record of body weight measurements",
          "type": "group",
          "repeats": true,
          "item": [
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%WeightRepeat.value.ofType(Quantity).value"
                  }
                }
              ],
              "linkId": "SummaryBodyWeightObservationValue",
              "text": "Value",
              "type": "decimal",
              "repeats": false
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%WeightRepeat.value.ofType(Quantity).code"
                  }
                },
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "code": "drop-down",
                        "system": "http://hl7.org/fhir/questionnaire-item-control"
                      }
                    ]
                  }
                }
              ],
              "linkId": "SummaryBodyWeightObservationUnitcode",
              "text": "Unit",
              "type": "choice",
              "repeats": false,
              "answerOption": [
                {
                  "valueString": "kg",
                  "initialSelected": true
                }
              ]
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%WeightRepeat.effective.ofType(date)"
                  }
                }
              ],
              "linkId": "SummaryBodyWeightObservationEffectiveDate",
              "text": "Effective date",
              "type": "date",
              "repeats": false
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%WeightRepeat.issued"
                  }
                }
              ],
              "linkId": "SummaryBodyWeightObservationIssued",
              "text": "Date issued",
              "type": "date",
              "repeats": false
            }
          ]
        },
        {
          "linkId": "SummaryBodyWeightAssessed",
          "text": "Resident was assessed for unplanned weight loss",
          "type": "boolean",
          "repeats": false,
          "required": true,
          "readOnly": false,
          "enableWhen": [
            {
              "question": "NQIPSummaryAbsentEntireQuarter",
              "operator": "=",
              "answerBoolean": false
            }
          ]
        },
        {
          "linkId": "SummaryBodyWeightWeightLossProgram",
          "text": "Care recipient is on a planned weight  program",
          "type": "boolean",
          "repeats": false,
          "required": true,
          "readOnly": false,
          "enableWhen": [
            {
              "question": "SummaryBodyWeightAssessed",
              "operator": "exists",
              "answerBoolean": true
            }
          ],
          "initial": [
            {
              "valueboolean": false
            }
          ]
        }
      ]
    },
    {
      "linkId": "Declaration",
      "text": "Declaration",
      "type": "group",
      "repeats": false,
      "item": [
        {
          "type": "display",
          "linkId": "DeclarationText",
          "text": "Please make sure that the resident's record has been carefully checked for accuracy and then declare this as true below before submitting this form.",
          "required": true,
          "repeats": false,
          "readOnly": false
        },
        {
          "linkId": "DeclarationChoice",
          "text": "I declare that the resident's record has been checked and that the information above is true at the time of submission",
          "type": "boolean",
          "repeats": false,
          "required": true,
          "readOnly": false
        }
      ]
    }
  ]
}
